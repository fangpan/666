<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>在线套餐变更</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/change.css">
</head>
<body>
    <nav class="navbar navbar-default">
        <img alt="" src="images/logo.png" width="100%">
        <div class="path">
             <img alt="" src="images/2.png" width="100%">
        </div>
    </nav>
   <div class="container" style="padding:0;padding-bottom:45px;">
     <!-- 旧套餐详情 -->
      <div class="paddingCon">
         <div class="topT">
             <p>您的当前套餐信息：</p>
         </div>
         <ul class="oldCT" id="oldCT">
          
         </ul>
         <div class="oldZF" id="oldZF">
             
         </div>
      </div> 
      <div class="graybg"></div>

     <!--  可选的新套餐 -->
       <div class="paddingCon" id="newTCcon">
         <div class="topT">
             <p>可变更套餐有：</p>
         </div>
       
        <!-- 单个套餐内容 -->
      
      </div> 
      <div class="clearfix"></div>
      <div class="graybg"></div>

    <!-- 温馨提示 -->
      <div class="paddingCon Tips">
         <div class="topT">
             <p>温馨提示：</p>
         </div>
         <ul>
            <li>1、每个主卡最多可办理4张副卡。前2张副卡免收月功能非，从第三张卡起收取20元/月/张副卡月功能费</li>
            <li>2、新套餐只能加入1条单宽带；1条ITV</li>
            <li>3、最终是否能加入新套餐，以电信客服电话确认为准</li>
            <li>4、变更为融合套餐不提供选号服务</li>
            <li>5、办理成功后如需查询套餐变更信息，可在"我的欢go"-"我的订单"中进行查询。</li>
         </ul>
      </div> 
      <div class="clearfix"></div>
      <div class="graybg"></div>

      <!-- 下一步按钮 -->
       <div class="changeNext" id="changeNext">
          <button type="button" class="btn btn-default btn-block">我选好了，进行下一步</button>
       </div>
   </div>
</body>
</html>

<script src="js/jquery-2.1.4.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/alert.js"></script>
<script>
 
  /*旧套餐*/

  var oldjson=

       {  
          id:"aaaaa",
          name:"张三",
          card:'420***********9999',
          title:'十全十美套餐',
          con:'月基本费199元，国内接听免费，赠送来电显示和189邮箱、2T家庭云空间，包含国内通话800分钟，超出后国内通话0.15元/分钟，省内流量不限量(当月省内手机上网流量达到40GB后，上网速率降至3G网络速度，当月累计使用达到100GB后，上网速率降至2G 网络速度，次月恢复),包含省际流量3GB，超出后国内流量每500MB收30元；0-100MB按0.3元/MB收费，100MB-500MB免费。国内短、彩信0.10元/条。国内通话和接听免费范围不包括港澳台地区。省内不限量流量不适用于流量不清零规则。',
          pay:'199.0元/月'
        
       }

     var h1 = 
            '<li>机主姓名：<span>'+oldjson.name+'</span></li>'
           +'<li>有效证件：<span>'+oldjson.card+'</span></li>'
           +'<li>套餐名称：<span style="color:#FF7600; ">'+oldjson.title+'</span></li>'
           +'<li id="DCdetail" class="DCdetail">套餐详情：<span class="detailCON">'+oldjson.con+'</span></li>'
           +'<li class="opendetail"><span>点击查看详情描述</span></li>'
           +'<li class="closedetail"><span>点击收起详情描述</span></li>'    


    $("#oldCT").append(h1)
   
     var h2 = '<p>当前套餐资费：<span style="color:#FF7600; ">'+oldjson.pay+'</span></p>'
        
    $("#oldZF").append(h2)


var height = $("#DCdetail").height();

  if(height>44 ){

    $("#DCdetail").addClass("height")

    $(".opendetail").show();
  }

   $(".opendetail").click(function(){

      $(this).hide();
      $("#DCdetail").removeClass("height")
      $(".closedetail").show();
   })

    $(".closedetail").click(function(){

      $(this).hide();
      $("#DCdetail").addClass("height")
      $(".opendetail").show();
   })

  /* 新套餐*/

    var newjson=[

        {
          id:"aa11",
          name:"十全十美 199元套餐",
          call:'国内1000分钟',
          liu:'国内不限量',
          msg:'1000条',
          pay:'199.0元/月'
       },
         {
          id:"aa22",
          name:"十全十美 299元套餐",
          call:'国内2000分钟',
          liu:'国内不限量',
          msg:'1000条',
          pay:'299.0元/月'
       },
         {
          id:"aa33",
          name:"十全十美 399元套餐",
          call:'国内3000分钟',
          liu:'国内不限量',
          msg:'1000条',
          pay:'399.0元/月'
       }

    ]
  for(var i=0;i<newjson.length;i++){

     var item= newjson[i]

     var h3= '<div class="canChange signChange" id="'+item.id+'">'
            +'<div class="changeTitle">'+item.name+'</div>'
            +'<ul class="oldCT" style="margin:0 15px;">'
            + '<li>套餐语音：<span>'+item.call+'</span></li>'
            + '<li>流量：<span>'+item.liu+'</span></li>'
            + '<li>短信：<span>'+item.msg+'</span></li>'
            + '<li>月套餐基本费：<span>'+item.pay+'</span></li>'
            +'</ul>'
            +'<div class="clearfix"> </div>'
            +'<div class="newZF">'
            + '<p class="choseTC">'
            + '<span class="pull-left">选择此套餐</span>'
            + '</p>'
            +'</div>'
            +'</div>'

     $("#newTCcon").append(h3)
  }
	
  /*点击切换样式*/
  $(".signChange").click(function(){
     $(this).addClass("active").siblings().removeClass("active");
  })
 
/*点击下一步*/
 var ok = false;
	
 $("#changeNext").click(function(){
    var p=$(".signChange")
   for(var i = 0;i <p.length;i++){
  　　if(p[i].className=='canChange signChange active'){
       var  obj = p[i]
       var id =  obj.getAttribute("id")
       }
  }

if(p.hasClass("active")){
      ok= true;
  }
  else{
      alert("请选择套餐");
      ok = false;
  }
 if(ok){
    alert(id)
    window.location.href="sure.html"
  }  
 })

</script>


